# PRD: 法律服务方案自动生成系统

**版本**: v0.1 Draft
 **日期**: 2026-02-08
 **状态**: 待客户确认

------

## 1. 背景与问题

### 1.1 客户概况

一家法律服务机构（律所/法律援助中心），需要为每个案件生成标准化的法律服务方案（Legal Service Plan）。

### 1.2 现状痛点

- 律师每份方案需要 **20-40 分钟** 手动编写
- 方案是 **合规硬性要求**，用于满足法院立案、律协监管、法援拨款等外部审查
- 机构 **严重人手不足**，方案任务大量积压
- 当前流程：律师查阅委托人的案件材料，手工撰写服务方案

### 1.3 目标

构建一个 Web 应用，让律师助理（Paralegal）录入案件信息，系统调用 LLM 自动生成法律服务方案，律师审核后下载/打印。

------

## 2. 用户与角色

### 2.1 主要用户

| 角色                 | 使用方式                             | 备注             |
| -------------------- | ------------------------------------ | ---------------- |
| 律师助理 (Paralegal) | 录入案件信息、触发方案生成、下载方案 | 系统的主要操作者 |

### 2.2 不接触系统的角色

| 角色            | 关系                                           |
| --------------- | ---------------------------------------------- |
| 委托人 (Client) | 不登录系统；方案生成后由律师打印或发送给委托人 |
| 律师 (Attorney) | 当前版本不登录系统；线下审核律师助理下载的方案 |

### 2.3 后续版本可能新增的角色

- 律师（在线审核/编辑方案）
- 管理员（维护转介律师主数据、案由编码表）

------

## 3. 数据输入

### 3.1 表单字段

| 字段                                   | 类型               | 校验规则                 | 是否必填 |
| -------------------------------------- | ------------------ | ------------------------ | -------- |
| 委托人姓名 (Client First Name)         | string             | 非空                     | 必填     |
| 委托人姓氏 (Client Last Name)          | string             | 非空                     | 必填     |
| 转介律师 (Referring Attorney)          | string             | 从已有主数据中选择或新建 | 必填     |
| 转介律师执业证号 (Bar Number)          | string, 固定格式   | 格式校验 + 唯一性校验    | 必填     |
| 案件编号 (Case Number)                 | 6位唯一编号        | 格式校验 + 唯一性校验    | 必填     |
| 主要案由 (Primary Cause of Action)     | 标准案由编码       | 必须为合法编码           | 必填     |
| 寻求的法律救济 (Legal Remedy Sought)   | string             | 非空                     | 必填     |
| 关联案由 (Additional Causes of Action) | 标准案由编码列表   | 每项必须为合法编码       | 选填     |
| 既往法律行动 (Prior Legal Actions)     | string 列表        | —                        | 选填     |
| 案件材料 (Case Documents)              | string 或 PDF 上传 | PDF 限电子版（非扫描件） | 必填     |

### 3.2 待确认项

- [ ] 执业证号的具体格式规则（各省/各州格式不同？）
- [ ] 案由编码体系（中国：最高法案由分类？美国：具体标准？）
- [ ] 是否需要委托人身份证号/SSN 作为唯一标识字段
- [ ] PDF 是否可能是扫描件（需要 OCR 支持？）
- [ ] 是否需要支持多文件上传
- [ ] 案件材料的大小上限

------

## 4. 核心输出：法律服务方案

### 4.1 生成粒度

**一个方案对应一个案件（一个案由）**。同一委托人有多个案件时，分别生成独立方案。

### 4.2 方案必须包含的章节

| 章节                                  | 内容说明                                     |
| ------------------------------------- | -------------------------------------------- |
| 案情摘要 (Problem List)               | 委托人面临的法律问题清单与争议焦点           |
| 服务目标 (Goals)                      | 期望达到的法律结果（胜诉、和解、减轻处罚等） |
| 律师建议策略 (Attorney Interventions) | 具体法律行动方案（起诉、谈判、调解、取证等） |
| 跟进计划 (Monitoring Plan)            | 关键时间节点、下次会面、需补充材料、进展追踪 |

### 4.3 输出格式

- 文本文件下载（.txt 或 .docx）
- 律师线下审核后打印或发送给委托人

### 4.4 待确认项

- [ ] 不同案由是否需要不同模板？
- [ ] 方案是否需要标注"AI 辅助生成"？
- [ ] 是否需要"重新生成"功能？
- [ ] 是否需要版本管理（保留修改历史）？

------

## 5. 重复检测规则

### 5.1 案件重复检测

| 场景                                            | 处理方式                     | 原因                                   |
| ----------------------------------------------- | ---------------------------- | -------------------------------------- |
| 同一委托人 + 同一案由 + 同一对方当事人 + 同一天 | ❌ **ERROR** - 必须阻止提交   | 肯定是重复录入                         |
| 同一委托人 + 同一案由 + 同一对方当事人 + 不同天 | ⚠️ **WARNING** - 可确认后继续 | 可能是方案更新或旧案重开               |
| 案件编号相同 + 委托人姓名或身份证号不同         | ⚠️ **WARNING** - 可确认后继续 | 可能是录入错误                         |
| 姓名 + 身份证号相同 + 案件编号不同              | ⚠️ **WARNING** - 可确认后继续 | 可能是同一人的不同案件，也可能重复建档 |

### 5.2 转介律师重复检测

| 场景                        | 处理方式               | 原因               |
| --------------------------- | ---------------------- | ------------------ |
| 执业证号相同 + 律师姓名不同 | ❌ **ERROR** - 必须修正 | 执业证号是唯一标识 |

### 5.3 Warning 处理流程

- 弹窗展示已有记录的详细信息
- 用户可选择：**确认为新案件** / **查看已有案件** / **取消提交**

### 5.4 待确认项

- [ ] WARNING 被忽略后是否需要记录原因？
- [ ] 已结案的旧案件是否参与重复检测？
- [ ] 时间窗口是否需要从"天"扩大到"30天/90天/案件存续期间"？
- [ ] 委托人姓名模糊匹配规则（错别字、中英文混用）

------

## 6. 功能需求与优先级

### 6.1 Phase 1 - MVP（全部必须）

| 功能                        | 必须 | 说明                             |
| --------------------------- | ---- | -------------------------------- |
| 案件信息录入表单 + 数据校验 | ✅    | 所有字段按第3节规则校验          |
| 委托人/案件重复检测         | ✅    | 不能打乱现有工作流               |
| 转介律师重复检测            | ✅    | 影响监管报告准确性               |
| LLM 生成法律服务方案        | ✅    | 核心价值                         |
| 方案下载                    | ✅    | 用户需要上传到案件管理系统或打印 |
| 导出报告                    | ✅    | 法院/律协/法援拨款审查需要       |

### 6.2 Phase 2 - 增强功能（后续迭代）

| 功能                  | 说明                         |
| --------------------- | ---------------------------- |
| 律师在线审核/编辑方案 | 当前版本律师线下审核         |
| 角色权限管理          | 区分律师助理、律师、管理员   |
| 审计日志              | 记录谁在什么时间做了什么操作 |
| 方案版本管理          | 保留修改历史，支持回溯       |
| 批量导入              | 处理历史积压案件             |
| 草稿保存              | 录入到一半可以保存           |

------

## 7. 导出报告

### 7.1 已知需求

- 需要快速导出功能，用于向法院/律协/法援机构提交报告

### 7.2 待确认项

- [ ] 导出的具体内容是什么？单个案件还是批量汇总？
- [ ] 接收方是谁？不同接收方格式是否不同？
- [ ] 能否提供一份报告样本？
- [ ] 导出频率：按需？月度？季度？
- [ ] 导出格式：CSV？PDF？Excel？

------

## 8. 非功能需求

### 8.1 生产就绪要求

| 要求       | 说明                                         |
| ---------- | -------------------------------------------- |
| 输入校验   | 所有字段必须经过服务端校验                   |
| 数据完整性 | 重复检测规则在数据库层面强制执行             |
| 错误处理   | 错误信息安全、清晰、不泄露内部实现           |
| 代码模块化 | 代码结构清晰，职责分离                       |
| 自动化测试 | 关键逻辑（校验规则、重复检测）必须有测试覆盖 |
| 开箱即用   | 项目克隆后可直接运行                         |

### 8.2 数据安全

- [ ] **关键待确认**：案件材料能否发送到外部 LLM API？还是必须私有化部署？
- [ ] 数据保留策略（法律文件通常有长期保存要求）
- [ ] 是否需要数据加密（静态 + 传输中）

### 8.3 性能

- [ ] 并发用户数预估
- [ ] LLM 生成方案的可接受等待时间

------

## 9. 开放问题汇总

以下问题需要在开发前与客户确认：

### 最高优先级（阻塞开发）

1. 能否提供 2-3 份真实法律服务方案样本（脱敏后）？
2. 案件材料能否发送到外部 LLM API（Claude/GPT）？
3. 案由编码体系用什么标准？
4. 执业证号的具体格式规则？

### 高优先级（影响架构）

1. 导出报告的接收方、内容、格式是什么？能否提供样本？
2. 委托人的唯一标识字段是什么（身份证号？手机号？系统自动分配？）
3. 积压了多少案件？是否需要批量导入功能？

### 中优先级（影响功能范围）

1. WARNING 被忽略后是否需要记录原因？
2. 已结案案件是否参与重复检测？
3. 是否需要草稿保存功能？
4. 方案输出格式偏好（.txt / .docx / .pdf）？

------

## 附录 A：概念对照表（医药 → 法律）

| 医药概念                      | 法律概念                                             |
| ----------------------------- | ---------------------------------------------------- |
| Patient                       | Client（委托人）                                     |
| Care Plan                     | Legal Service Plan（法律服务方案）                   |
| Pharmacist                    | Attorney（律师）                                     |
| Medical Assistant             | Paralegal（律师助理）                                |
| Referring Provider            | Referring Attorney（转介律师）                       |
| NPI                           | Bar Number（执业证号）                               |
| Patient MRN                   | Case Number（案件编号）                              |
| Primary Diagnosis (ICD-10)    | Primary Cause of Action（主要案由）                  |
| Medication Name               | Legal Remedy Sought（寻求的法律救济）                |
| Additional Diagnosis          | Additional Causes of Action（关联案由）              |
| Medication History            | Prior Legal Actions（既往法律行动）                  |
| Patient Records               | Case Documents（案件材料）                           |
| Medicare/Pharma Reimbursement | Court/Bar/Legal Aid Compliance（法院/律协/法援合规） |

## 附录 B：重复检测规则对照表（医药 → 法律）

| 医药规则                     | 法律规则                                        | 处理方式  |
| ---------------------------- | ----------------------------------------------- | --------- |
| 同一患者 + 同一药物 + 同一天 | 同一委托人 + 同一案由 + 同一对方当事人 + 同一天 | ❌ ERROR   |
| 同一患者 + 同一药物 + 不同天 | 同一委托人 + 同一案由 + 同一对方当事人 + 不同天 | ⚠️ WARNING |
| MRN相同 + 名字或DOB不同      | 案件编号相同 + 委托人信息不一致                 | ⚠️ WARNING |
| 姓名+DOB相同 + MRN不同       | 姓名+身份证号相同 + 案件编号不同                | ⚠️ WARNING |
| NPI相同 + Provider名字不同   | 执业证号相同 + 律师名字不同                     | ❌ ERROR   |