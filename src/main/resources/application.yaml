spring:
  datasource:
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5433/dev_db}
    username: ${SPRING_DATASOURCE_USERNAME:dev_xh}
    password: ${SPRING_DATASOURCE_PASSWORD:dev_xh}
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  redis:
    host: ${SPRING_REDIS_HOST:localhost}
    port: 6379

management:
  endpoints:
    web:
      exposure:
        include: health,prometheus,metrics
  metrics:
    tags:
      application: caseplan

# Queue abstraction: set queue.provider to "redis" (local) or "sqs" (AWS Lambda)
queue:
  provider: ${QUEUE_PROVIDER:redis}
  sqs:
    queue-url: ${QUEUE_URL:}
    region: ${AWS_REGION:us-east-2}

# LLM abstraction: set llm.provider to "openai" (DeepSeek/OpenAI) or "claude"
llm:
  provider: ${LLM_PROVIDER:openai}
  openai:
    base-url: ${LLM_OPENAI_BASE_URL:https://api.deepseek.com/v1}
    api-key: ${LLM_OPENAI_API_KEY:${DEEPSEEK_API_KEY:}}
    # Leave empty to auto-resolve latest model from /models.
    model: ${LLM_OPENAI_MODEL:}
    model-refresh-seconds: ${LLM_OPENAI_MODEL_REFRESH_SECONDS:2592000}
    max-tokens: 4000
  claude:
    api-key: ${ANTHROPIC_API_KEY:}
    # Leave empty to auto-resolve latest model from /models.
    model: ${LLM_CLAUDE_MODEL:}
    model-refresh-seconds: ${LLM_CLAUDE_MODEL_REFRESH_SECONDS:2592000}
    max-tokens: 4000

# Legacy (still used if LLM_OPENAI_API_KEY not set)
deepseek:
  api-key: ${DEEPSEEK_API_KEY:}
